<!DOCTYPE html>
<html lang="es">
  <head>
    <title>App</title>
    <link rel="icon" type="image/png" href="../assets/favicon.png">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <script>
      const aut = supabase.createClient(
        "https://dvuqnktmjvotdlnbbnhw.supabase.co", 
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2dXFua3RtanZvdGRsbmJibmh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1MTMxNzUsImV4cCI6MjA1NjA4OTE3NX0.NBjk0irYgv23oENmlKSLHJWG6fykfsI8X1hUHrVwT2Y"
      );

      async function checkAuth() {
        const { data: { session } } = await aut.auth.getSession();
        
        if (session) {
          // Usuario autenticado, cargar el script
          const script = document.createElement("script");
          script.type = "module";
          script.src = "./builder.js";
          document.body.appendChild(script);
        } else {
          // Usuario no autenticado, ocultar contenido o redirigir
          document.body.innerHTML = "<h1>No tas actorizado weee jajaja XD</h1>";
        }
      }
      checkAuth();
    </script>
  </body>
</html>